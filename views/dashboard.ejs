<%- include('partials/header', { activeTab: activeTab }) %>

<main>
  <h2 class="center"> Dashboard - <%= station %> - <%= today %></h2>
  <h3 class="center">Overview</h3>
  
    <div class="dashbody">

      <!-- Absent Employees -->
      <section>
        <h3>Absent Employees</h3>
        <% if (absentEmployees.length > 0) { %>
          <div class="notifications red">
            <% absentEmployees.forEach(emp => { %>
              <span class="badge red-badge" title="Absent">
                <%= emp.name %> (ID: <%= emp.id %>)
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>No absentees today.</p>
        <% } %>
      </section>

      <!-- Red Supplies -->
      <section>
        <h3>Supplies Low Volume (&lt; 25%)</h3>
        <% if (redSupplies.length > 0) { %>
          <div class="notifications red">
            <% redSupplies.forEach(item => { %>
              <span class="badge red-badge" title="Volume: <%= item.current_volume %> / <%= maxSupplyVolume %> liters">
                <%= item.item_name %>
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>No supplies running critically low.</p>
        <% } %>
      </section>

      <!-- Red Bins -->
      <section>
        <h3>Bins Low Volume (&lt; 25%)</h3>
        <% if (redBins.length > 0) { %>
          <div class="notifications red">
            <% redBins.forEach(bin => { %>
              <span class="badge red-badge" title="Volume: <%= bin.current_volume %> / <%= maxBinVolume %> liters">
                <%= bin.bin_name %>
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>All bins sufficiently stocked.</p>
        <% } %>
      </section>


    <div class="dashbody2">
        <!-- Late Employees -->
      <section>
        <h3>Late Employees (In Time &gt; 10:35)</h3>
        <% if (lateEmployees.length > 0) { %>
          <div class="notifications yellow">
            <% lateEmployees.forEach(emp => { %>
              <span class="badge yellow-badge" title="Late Arrival">
                <%= emp.name %> (ID: <%= emp.id %>)
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>No late arrivals today.</p>
        <% } %>
      </section>
      <!-- Yellow Supplies -->
      <section>
        <h3>Supplies Moderate Volume (25% - 50%)</h3>
        <% if (yellowSupplies.length > 0) { %>
          <div class="notifications yellow">
            <% yellowSupplies.forEach(item => { %>
              <span class="badge yellow-badge" title="Volume: <%= item.current_volume %> / <%= maxSupplyVolume %> liters">
                <%= item.item_name %>
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>No supplies with moderate volume.</p>
        <% } %>
      </section>

      <!-- Yellow Bins -->
      <section>
        <h3>Bins Moderate Volume (25% - 50%)</h3>
        <% if (yellowBins.length > 0) { %>
          <div class="notifications yellow">
            <% yellowBins.forEach(bin => { %>
              <span class="badge yellow-badge" title="Volume: <%= bin.current_volume %> / <%= maxBinVolume %> liters">
                <%= bin.bin_name %>
              </span>
            <% }) %>
          </div>
        <% } else { %>
          <p>No bins with moderate volume.</p>
        <% } %>
      </section>
    </div>
  </div>

</main>

<style>
   
  .notifications {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }
  .badge {
    font-size: 1rem;
    padding: 4px 0;
    font-weight: 600;
    user-select: none;
    cursor: default;
    white-space: nowrap;
  }
  .yellow-badge {
    color: #d2b048;
  }
  .red-badge {
    color: #c0392b;
  }
  h3 {
    margin-bottom: 0.4rem;
  }
.ctflex {
  display: flex;
  gap: 40px; /* reduced gap */
  justify-content:center;
  align-items: flex-start;
  padding: 20px;
  flex-wrap: nowrap; /* prevent wrapping */
}

.dashbody, .dashbody2 {
  flex: 1 1 auto; /* Allows flex items to grow and shrink based on content */
  min-width: 0;
  
}

section {
  padding: 6px 0; /* reduce vertical padding */
  margin-bottom: 10px;
  padding: 0 10px;
}
.yellow{
  color:goldenrod;
}
.dashbody{
  padding:0 100px;
}
</style>

<%- include('partials/footer') %>
